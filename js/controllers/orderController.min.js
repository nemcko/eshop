define(["controllers/controllers","services/apiService"],function(e){e.controller("OrderCtrl",["$scope","ApiSvc","$modal","$stateParams","$locale","$timeout",function(a,d,e,f,g,h){a.userdata={};a.showOrderSection=[!1,!1,!0,!0,!0,!0];a.ToggleOrderSelection=function(b){a.showOrderSection[b]=!a.showOrderSection[b]};a.CheckInput=function(b){var c="";if(void 0!==b){a.checkInputErrors[b]=!1;switch(b){case "userdata.name":a.userdata.name||(c="Meno pre faktur\u00e1ciu je potrebn\u00e9 vyplni\u0165",a.checkInputErrors[b]=
!0);break;case "userdata.surname":a.userdata.surname||(c="Priezvisko pre faktur\u00e1ciu je potrebn\u00e9 vyplni\u0165",a.checkInputErrors[b]=!0);break;case "userdata.ico":a.userdata.company&&!a.userdata.ico&&(c="Pre firmu je potrebn\u00e9 vyplni\u0165 I\u010cO",a.checkInputErrors[b]=!0);break;case "userdata.dic":a.userdata.company&&!a.userdata.dic&&(c="Pre firmu je potrebn\u00e9 vyplni\u0165 DI\u010c",a.checkInputErrors[b]=!0);break;case "userdata.phone":a.userdata.phone||(c="Telef\u00f3nne \u010d\u00edslo je potrebn\u00e9 vyplni\u0165",
a.checkInputErrors[b]=!0);break;case "userdata.zip":a.userdata.zip||(c="PS\u010c pre faktur\u00e1ciu je potrebn\u00e9 vyplni\u0165",a.checkInputErrors[b]=!0);break;case "userdata.city":a.userdata.city||(c="Obec pre faktur\u00e1ciu je potrebn\u00e9 vyplni\u0165",a.checkInputErrors[b]=!0)}return c}return d.checkInputErrors(a)};a.UpdOrderItem=function(b,c){d.setData("data/updbasketitem",a.$parent.clientData.sid,{idvar:b,quantity:c,lng:a.$parent.defOptions.pageSettings.lng},a.FillOrder)};a.DelOrderItem=
function(b){d.setData("data/delbasketitem",a.$parent.clientData.sid,{idvar:b,lng:a.$parent.defOptions.pageSettings.lng},a.FillOrder)};a.FillOrder=function(b){a.$parent.FillBasket(b);a.$parent.CalculateOrder(a)};a.SelectDlv=function(b){a.delivery.selDlv=b;a.delivery.selDlvpay=b.dlvpay[0];a.$parent.CalculateOrder(a)};a.SelectDlvpay=function(b){a.delivery.selDlvpay=b;a.$parent.CalculateOrder(a)};a.SelectCountry=function(b){void 0===a.userdata&&(a.userdata={});a.userdata.country=b;a.$parent.CalculateOrder(a)};
a.DoCheck=function(){for(var b in a.showOrderSection)a.showOrderSection[b]&&(a.showOrderSection[b]=!1);a.CheckInput()&&(d.setData("data/userdata",a.$parent.clientData.sid,{userdata:a.userdata,comment:a.basket.comment,iddeliver:a.delivery.selDlv.iddeliver,idmpay:a.delivery.selDlvpay.idmpay,dlvprice:a.delivery.price,payprice:a.delivery.selDlvpay.payprice},""),d.goToState("check"))};a.FillUserData=function(b){if(b=d.decodeData(b,a.$parent.clientData.sid))a.userdata=b};a.$watch("$parent.clientData.uid",
function(b,c){b!==c&&d.getData("data/userdata",null,a.FillUserData)},!0);a.FillDeliveryData=function(b){a.$parent.FillDelivery(b,a)};d.getData("data/dlvpay",null,a.FillDeliveryData)}])});
